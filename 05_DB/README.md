# DB
## SQL
데이터베이스를 조작하기 위해 사용하는 명령문. 쿼리라고도 한다. 확장자 SQL 의 파일들.  
엑셀과 같은 테이블 형태로 데이터를 저장하게 된다. 데이터의 (조회, 추가, 수정, 삭제)등을 담당한다.  
* DQL 데이터 질의
* DML 데이터 조작
* DDL 테이블 조작
* TCL 트랜젝션 처리

### 테이블 조작 관련
```sql
CREATE TABLE 테이블이름 (열이름 자료형, 열이름2 자료형 ...);
```
사용할 데이터를 담을 테이블을 생성하는 명령문. SQL 은 엑셀형식이기 때문에 행, 열을 가지고 열에 데이터의 이름, 행으로 이어지면서 데이터의 세부사항에 대한 설정을 저장하는 듯. 이 상황에서는 데이터를 입력하는게 아니라 데이터를 저장할 틀을 만드는 느낌. 자료형 반드시 설정해야 함.  

```SQL
ALTER TABLE 테이블이름 ADD 열이름 자료형;
```
지정한 테이블에 새로운 열을 추가한다. 지정한 열이름과 자료형으로 추가됨.  

```SQL
ALTER TABLE 테이블이름 MODIFY 열이름 변경할자료형;
ALTER TABLE 테이블이름 MODIFY 열이름 변경할자료형, 열이름2 변경할속성 ...;
```
이미 생성되어 있는 테이블의 열의 자료형을 변경하거나, 자료형의 크기를 변경하거나, 속성을 변경할 수 있는 명령어.  

```SQL
ALTER TABLE 테이블이름 DROP 열이름 자료형;
```
생성되어 있는 지정된 열을 테이블에서 완전히 삭제한다. 이미 데이터가 있다면 데이터도 함께 삭제됨.  

```SQL
ALTER TABLE 테이블이름 RENAME COLUMN 열이름 TO 새로운이름;
```
생성되어 있는 열의 이름을 변경.

```SQL
COMMENT ON COLUMN 테이블명.열이름 IS '설명';
COMMENT ON TABLE 테이블명 IS '설명';
```
지정된 테이블에 있는 지정한 열에 설명문을 추가한다.  
테이블과 데이터열의 코멘트는 따로 취급함. 테이블 자체의 코멘트 항목도 존재함.  

```SQL
DROP TABLE 테이블이름;
```
지정한 테이블을 삭제함.  

### 데이터 조작 관련
```SQL
INSERT INTO 테이블이름 VALUES (값);
INSERT INTO 테이블이름 (열이름1, 열이름2 ...) VALUES (값1, 값2 ...);
```
지정한 테이블의 열이름에 값을 추가하는 기능. 모든 열의 값을 추가할경우 열이름란을 생략 가능하다.  
다만 그럴경우 모든 열에 들어갈 값을 전부 입력해주어야 하고, 열이름을 지정할경우 나머지 열에는 NULL 이 입력된다.  
  
```SQL
UPDATE 테이블이름 SET 열이름 = 변경할값 WHERE 조건문;
UPDATE 테이블이름 SET 열이름 = 변경할값;
```
조건문에 맞고, 열이름에 해당하는 데이터를 새로운 값으로 변경하는 명령문.  
조건문을 생략할경우 열이름에 해당하는 모든 데이터를 일괄 변경하게 된다.  

```SQL
DELETE FROM 테이블이름 WHERE 조건문;
DELETE FROM 테이블이름;
```
데이터를 삭제하는 명령. 보통 조건문에 특정 열이름의 데이터값이 얼마인지로 판단하는듯?  
조건문을 생략할경우 해당 테이블이 가지고 있는 모든 데이터를 삭제하니 주의.  

### 데이터 참조 관련
```SQL
SELECT 열이름 FROM 테이블이름;
```
지정한 테이블에서 열이름에 해당하는 모든 데이터를 가져온다. 열이름 쉼표구분으로 다중설정 가능.  
열이름 위치에 '*' 를 사용할경우 해당 테이블이 가지고 있는 모든 데이터를 가져온다.  

```SQL
SELECT * AS 별명 FROM 테이블이름;
```
표시할 데이터에 임의의 열이름을 줄 수 있다. 이때 한글을 사용하더라도 '' 필요 없음.  

```SQL
SELECT * FROM 테이블이름 ORDER BY 열이름 ASC/DESC;
```
지정한 열을 기준으로 ASC(내림차순) / DESC(오름차순) 으로 정렬하여 보여준다.  
정렬기준을 여러개 설정하고 싶을 경우 쉼표로 구분가능.  

```SQL
SELECT 열이름 FROM 테이블이름 GROUP BY 열이름;
```
지정한 열이름을 기준으로 그룹화하여 보여준다. 앞 뒤의 열이름을 동일해야 오류가 안나는듯?  

#### 함수
기본적으로는 DUAL 이라는 테이블에 포함되어 있는 형식인듯. 단독으로 사용하기 위해서는 FROM DUAL 을 사용한다.  
DUAL 은 테스트 할 때 자주 사용하는 테이블인가봐???  
직접 작성한 테이블에서 사용할경우에는 아래와 같이 DUAL을 생략 가능한듯??  

```SQL
SELECT SUM(열이름) FROM 테이블이름;
```
아마도 오라클이 제공하는 기본함수? 지정한 열이름이 가지는 숫자를 전부 더해서 보여줌.  
열이 가지는 데이터가 숫자형이 아닐경우 오류남. 날자도 안됨.  
그룹핑 하지 않을경우 테이블이 가지고 있는 모든 값을 더해준다.  

```SQL
SELECT COUNT(열이름) FROM 테이블이름;
```
지정한 열이름이 가지고있는 데이터의 갯수를 반환한다. 중복판단 불가능. NULL 일경우 무시함.  



#### 연산자
```SQL
SELECT * FROM 테이블이름 WHERE A = B; A > B; A < B; A <= B; A >= B; A != B;
SELECT * FROM 테이블이름 WHERE A AND B;
SELECT * FROM 테이블이름 WHERE A OR B;
SELECT * FROM 테이블이름 WHERE NOT A;
```
기본적인 비교와 논리비교 연산자. 비교는 자바와 동일하고 논리비교일 경우 문자를 사용하는점이 다름.  

```SQL
SELECT A + B; A - B; A * B; A / B; FROM 테이블이름
```
데이터가 숫자형 또는 날자형일 경우에 사용 가능. 나머지 연산은 따로 있는 듯?  

```SQL
SELECT '문자열1' || '문자열2' || 열이름 FROM 테이블이름
```
두개의 문자열을 하나로 합쳐서 표시한다. 열이름을 지정할경우 지정한곳의 데이터에 맞추어서 표시하는듯.  

```SQL
SELECT * FROM 테이블이름 WHERE 열이름 BETWEEN A AND B;
SELECT * FROM 테이블이름 WHERE 열이름 NOT BETWEEN A AND B;
```
범위로 찾는 연산자. 지정한 열의 데이터가 지정한 값 A 와 B 사이에 있는지, 그 이외인지를 구분함.  

```SQL
SELECT * FROM 테이블이름 WHERE 열이름 IN (값);
SELECT * FROM 테이블이름 WHERE 열이름 NOT IN (값);
```
범위가 아닌 특정 값들과 일치하는지 아닌지를 판단한다.  

```SQL
SELECT * FROM 테이블이름 WHERE 열이름 LIKE '%문자열';
SELECT * FROM 테이블이름 WHERE 열이름 LIKE '문자열%';
SELECT * FROM 테이블이름 WHERE 열이름 LIKE '%문자열%';
```
문자열 검색용 키워드. %가 있는 장소는 다른 문자가 있음을 표현한다.  
지정한 문자열로 시작하는지, 끝나는지, 포함하는지의 여부를 구분.  

```SQL
SELECT * FROM 테이블이름 WHERE 열이름 IS NULL;
SELECT * FROM 테이블이름 WHERE 열이름 IS NOT NULL;
```
지정한 열의 값이 NULL 인지 아닌지를 판단해서 표시한다.  

### SQL 의 자료형
문자 자료형  
SQL 에서 문자열을 입력할때는 반드시 '' 사용.  
* CHAR()
>   문자/문자열 을저장. 고정된 길이. 최대 2000byte. 기본 1byte. 괄호 안에 어느정도의 byte 를 사용할건지 설정가능.
>   고정길이. 만약 10으로 지정한 CHAR 에 3byte 만큼의 문자/문자열을 저장하면 사용하지 않는 7byte가 낭비됨.
>   데이터에 들어올 글자가 무조건 같은 크기를 유지할것이라 예상될 경우 사용됨.
* VARCHAR2()
>   문자/문자열을 저장. 가변길이. 최대 4000byte. 기본 1byte. 괄호 안에 사용할 byte 설정 가능.
>   가변길이. 만약 10으로 지정한 CHAR 에 3byte 만큼의 문자/문자열을 저장하면 문자에 맞게 3byte만 사용.
* LONG
>   최대 2gb 의 가변길이 문자형.
* CLOB
>   최대 4gb 대용량 텍스트 데이터.
  
***
숫자 자료형
* NUMBER(P, S)
>   P(Precision) 숫자를 표시할 전체 자리의 갯수 = S + x, 1 ~ 38 범위.
>   S 소수 자릿수(양수 / 소수점 이하, 음수 / 소수점 이상). 지정한 자리의 숫자에서 반올림함. -84 ~ 127 범위.
>   가변숫자, 최대 22byte. 변수를 하나만 줄 경우 사용할 byte 수를 지정.
* FLOAT(P)
>   실수형 데이터. NUMBER 의 하위 자료형. 이진수를 기준으로 최대 22byte
>   P 에 들어가는 숫자로 사용할 byte 수를 지정.
  
숫자의 갯수를 지정하는 P 는 반올림을 한 후의 최종적인 갯수로 판단한다. 입력시점이 아님.  
괄호안에 들어가는 숫자는 1byte 당 하나의 숫자/ 하나의 알파벳을 저장하니까 사용하는 byte임과 동시에 숫자를 표현할 자리수거나 글자수를 의미하는 듯.  
한글의 경우 시스템에 설정된 캐릭터셋(unicode)에 따라 취급이 다르다. 보통 2byte, 3byte 둘중 하나인듯.  
가장 일반적인 utf-8 의 캐릭터셋인 AL32UTF8 의 경우 한글이 3byte 로 표현된다.  
이외에도 KO16KSC5601, KO16MSWIN949 등을 자주 사용하게 되는데 이 둘의 한글은 2byte 임.  

***
날짜 자료형
* DATE
>   BC4712 년부터 9999년까지의 연, 월, 일, 시, 분, 초 까지 입력 가능한 자료형.
* TIMESTAMP
>   연, 월, 일, 시, 분, 초, 밀리초, 타입존 을 입력 가능한 자료형.